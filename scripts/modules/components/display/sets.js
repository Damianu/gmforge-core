const _ogart = `
License
-------

CC-BY-SA 3.0:
 - http://creativecommons.org/licenses/by-sa/3.0/
 - See the file: cc-by-sa-3.0.txt
GNU GPL 3.0:
 - http://www.gnu.org/licenses/gpl-3.0.html
 - See the file: gpl-3.0.txt

Note the file is based on the LCP contest readme so don't expect the exact little pieces used like the base one.
*Additional license information.

Assets from:

LPC participants:
----------------

Casper Nilsson
	*GNU GPL 3.0 or later
	email: casper.nilsson@gmail.com
	Freenode: CasperN
	OpenGameArt.org: C.Nilsson

 - LPC C.Nilsson (2D art)

Daniel Eddeland
	*GNU GPL 3.0 or later
 - Tilesets of plants, props, food and environments, suitable for farming / fishing sims and other games.
 - Includes wheat, grass, sand tilesets, fence tilesets and plants such as corn and tomato.


Johann CHARLOT
	*GNU LGPL Version 3.
	*Later versions are permitted.
	Homepage  http://poufpoufproduction.fr
	Email     johannc@poufpoufproduction.fr

 - Shoot'em up graphic kit

Skyler Robert Colladay

 - FeralFantom's Entry (2D art)

BASE assets:
------------

Lanea Zimmerman (AKA Sharm)
~~~~~~~~~~~~~~~~~~~~~~~~~~~

 - barrel.png
 - brackish.png
 - buckets.png
 - bridges.png
 - cabinets.png
 - cement.png
 - cementstair.png
 - chests.png
 - country.png
 - cup.png
 - dirt2.png
 - dirt.png
 - dungeon.png
 - grassalt.png
 - grass.png
 - holek.png
 - holemid.png
 - hole.png
 - house.png
 - inside.png
 - kitchen.png
 - lava.png
 - lavarock.png
 - mountains.png
 - rock.png
 - shadow.png
 - signs.png
 - stairs.png
 - treetop.png
 - trunk.png
 - waterfall.png
 - watergrass.png
 - water.png
 - princess.png and princess.xcf


Stephen Challener (AKA Redshrike)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 - female_walkcycle.png
 - female_hurt.png
 - female_slash.png
 - female_spellcast.png
 - male_walkcycle.png
 - male_hurt.png
 - male_slash.png
 - male_spellcast.png
 - male_pants.png
 - male_hurt_pants.png
 - male_fall_down_pants.png
 - male_slash_pants.png


Charles Sanchez (AKA CharlesGabriel)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 - bat.png
 - bee.png
 - big_worm.png
 - eyeball.png
 - ghost.png
 - man_eater_flower.png
 - pumpking.png
 - slime.png
 - small_worm.png
 - snake.png


Manuel Riecke (AKA MrBeast)
~~~~~~~~~~~~~~~~~~~~~~~~~~~

 - hairfemale.png and hairfemale.xcf
 - hairmale.png and hairmale.xcf
 - soldier.png
 - soldier_altcolor.png


Daniel Armstrong (AKA HughSpectrum)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Castle work:

 - castlewalls.png
 - castlefloors.png
 - castle_outside.png
 - castlefloors_outside.png
 - castle_lightsources.png

 License
 -------

 CC-BY-SA 3.0:
  - http://creativecommons.org/licenses/by-sa/3.0/
  - See the file: cc-by-sa-3.0.txt
 GNU GPL 3.0:
  - http://www.gnu.org/licenses/gpl-3.0.html
  - See the file: gpl-3.0.txt

 Note only some files from the entries are selected.
 *Additional license information.

 Assets from:

 LPC participants:
 ----------------

 Barbara Rivera

  - tree,tombstone

 Casper Nilsson
 	*GNU GPL 3.0 or later
 	email: casper.nilsson@gmail.com
 	Freenode: CasperN
 	OpenGameArt.org: C.Nilsson

  - LPC C.Nilsson (2D art)

 Chris Phillips

  - tree

 Daniel Eddeland
 	*GNU GPL 3.0 or later

  - Tilesets of plants, props, food and environments, suitable for farming / fishing sims and other games.
  - Includes wheat, grass, sand tilesets, fence tilesets and plants such as corn and tomato.
  - Also includes village/marketplace objects like sacks, food, some smithing equipment, tables and stalls.


 Anamaris and Krusmira (aka? Emilio J Sanchez)

  - Sierra__Steampun-a-fy (with concept art)

 Jonas Klinger

  - Skorpio's SciFi Sprite Pack

 Joshua Taylor

  - Fruit and Veggie Inventory

 Leo Villeveygoux

  - Limestone Wall

 Mark Weyer

  - signpost+shadow

 Matthew Nash

  - Public Toilet Tileset

 Skyler Robert Colladay

  - FeralFantom's Entry


 BASE assets:
 ------------

 Lanea Zimmerman (AKA Sharm)
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~

  - barrel.png
  - brackish.png
  - buckets.png
  - bridges.png
  - cabinets.png
  - cement.png
  - cementstair.png
  - chests.png
  - country.png
  - cup.png
  - dirt2.png
  - dirt.png
  - dungeon.png
  - grassalt.png
  - grass.png
  - holek.png
  - holemid.png
  - hole.png
  - house.png
  - inside.png
  - kitchen.png
  - lava.png
  - lavarock.png
  - mountains.png
  - rock.png
  - shadow.png
  - signs.png
  - stairs.png
  - treetop.png
  - trunk.png
  - waterfall.png
  - watergrass.png
  - water.png
  - princess.png and princess.xcf


 Stephen Challener (AKA Redshrike)
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  - female_walkcycle.png
  - female_hurt.png
  - female_slash.png
  - female_spellcast.png
  - male_walkcycle.png
  - male_hurt.png
  - male_slash.png
  - male_spellcast.png
  - male_pants.png
  - male_hurt_pants.png
  - male_fall_down_pants.png
  - male_slash_pants.png


 Charles Sanchez (AKA CharlesGabriel)
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  - bat.png
  - bee.png
  - big_worm.png
  - eyeball.png
  - ghost.png
  - man_eater_flower.png
  - pumpking.png
  - slime.png
  - small_worm.png
  - snake.png


 Manuel Riecke (AKA MrBeast)
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~

  - hairfemale.png and hairfemale.xcf
  - hairmale.png and hairmale.xcf
  - soldier.png
  - soldier_altcolor.png


 Daniel Armstrong (AKA HughSpectrum)
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 Castle work:

  - castlewalls.png
  - castlefloors.png
  - castle_outside.png
  - castlefloors_outside.png
  - castle_lightsources.png

  Please link to the OpenGameArt.org page where this came from (if reasonable), attribute Sharm as graphic artist, and me as contributor (since I did pay out of the goodness of my heart to have this set made after all...)

  http://opengameart.org/content/lpc-arabic-elements
  http://opengameart.org/content/lpc-dungeon-elements

  cavern_ruins.png
  = Lava and Water tiles (CC-BY-SA) =
   * Based on water, lava and rock tiles in LPC made by Lanea Zimmerman (Sharm)
  = Cave wall tiles (CC-BY-SA) =
   * Based on cave tiles in LPC made by Lanea Zimmerman (Sharm)
  = Cave wall with wood tiles (CC-BY-SA) =
   * Based on cave tiles in LPC made by Lanea Zimmerman (Sharm)
   * Wooden parts by Hyptosis
  = Wooden sturctures (CC-BY-SA)
   * Based on wooden parts by Hyptosis
  = Stair tiles (CC-BY-SA) =
   * Based on stair tiles in LPC made by Lanea Zimmerman (Sharm)
  = Gray brick wall tiles (CC-BY-SA) =
   * Based on cement tiles in LPC made by Lanea Zimmerman (Sharm)
  = Brown brick floor tiles (CC-BY-SA) =
   * Based on cement tiles in LPC made by Lanea Zimmerman (Sharm)
  = Carpet and cobble stone floor tiles (CC-BY-SA) =
   * By Tuomo Untinen
  = Blueish gray brick floor tiles (CC-BY-SA) =
   * By Tuomo Untinen
   * Dark border is from Castle_2.png by Lanea Zimmerman (AKA Sharm)
  = Brown rocks and gray rock (CC-BY-SA) =
   * Johann C
  = Gray columns (CC-BY-SA) =
   * Johann C
  = Obelisk (CC-BY-SA) =
   * Obelisk base is made by Johann C
   * Tuomo Untinen
  = Monk statue (CC-BY-SA) =
   * Statue base is made by Johann C
   * Status is made by Johannes Sjölund
  = Wooden boxes (CC-BY-SA) =
   * Box is from LPC farming tileset by Daniel Eddeland (http://opengameart.org/content/lpc- farming-tilesets-magic-animations-and-ui-elements)
   * Gray rock content by Lanea Zimmerman (AKA Sharm)
   * Brown rock content by Johann C
   * Blue crystal content by Tuomo Untinen
  = Blue crystals and magic circles (CC-BY-SA) =
   * By Tuomo Untinen
  = Cell windows (CC-BY-SA) =
   * http://opengameart.org/content/lpc-dungeon-elements
   * Graphical artist Lanea Zimmerman AKA Sharm
   * Contributor William Thompson
  = Mine cart tracks (CC-BY-SA) =
   * By Tuomo Untinen
  = Coffin (CC-BY-SA) =
   * By Tuomo Untinen
  = Purple brick wall (CC-BY-SA) =
   * By Tuomo Untinen
  = Empty armors (CC-BY-SA) =
  * by Johannes Sjölund
  = Skeleton lying on the ground (CC-BY-SA) =
  * Skull by Johannes Sjölund
  * Adaption by Tuomo Untinen
  = Imp Statue (CC-BY-SA) =
  * Imp by Stephen Challener and contributor is William Thompson(http://opengameart.org/users/williamthompsonj)
  * Statue base and Imp recoloring by Tuomo Untinen
  = Castle floors with small tiles (CC-BY-SA) =
  * Daniel Armstrong (AKA HughSpectrum)
  = Castle floors with big tiles and purple castle floor (CC-BY-SA) =
  * by Tuomo Untinen
  = Fallen ceiling piece and rock sign (CC-BY-SA) =
  * By Tuomo Untinen
  = Brick Arc (CC-BY-SA) =
  * Bricks based on cement tiles in LPC made by Lanea Zimmerman (Sharm)
  * By Tuomo Untinen
  = Stone fence (CC-BY-SA) =
  * By Tuomo Untinen
  = Big stone sign (CC-BY-SA) =
  * By Tuomo Untinen
  = Red and Blue throne (CC-BY-SA) =
  * By Tuomo Untinen


  city_inside.png
  = Red carpets =
  * From LPC base tileset by Daniel Armstrong (AKA HughSpectrum)
  = Beds =
  * Based on bed from LPC base tileset by Lanea Zimmerman (AKA Sharm)
  = Wooden big table =
  * Based on table from LPC base tileset by Lanea Zimmerman (AKA Sharm)
  = Cloth big table =
  * By Tuomo Untinen
  = Brazier =
  * By Tuomo Untinen
  = Throne =
  * By Tuomo Untinen
  = Doors =
  * Based on door by Guido Bos
  = Cupboard, small table and table with mirror =
  * Cupboard based on LPC base tileset by Lanea Zimmerman (AKA Sharm)
  * Tables are from Castle_2.png by Lanea Zimmerman (AKA Sharm)
  * Mirror by Tuomo Untinen
  = Red banners, paintings and old papers =
  * By Tuomo Untinen
  = Small footchair =
  * By Tuomo Untinen
  = Double bed =
  * By Tuomo Untinen
  = Plants in pots =
  * By Tuomo Untinen
  = Gray bright windows =
  * By Tuomo Untinen
  = Short column and statue =
  * By Tuomo Untinen
  = Stone sign =
  * By Tuomo Untinen
  = Horse head =
  * By Tuomo Untinen
  = Grand piano =
  * By Tuomo Untinen
  = Cobblestone floor =
  * By Tuomo Untinen
  = Cellwall and door =
  * By Tuomo Untinen
  = Yellow stone floor =
  * Based from LPC base tileset by Daniel Armstrong (AKA HughSpectrum)
  = Gray wall topping  =
  * Tuomo Untinen
  = Vases with cover =
  * Based LPC base tiles by Lanea Zimmerman (AKA Sharm)
  * Modifications by Tuomo Untinen
  = Fireplace =
  * By Lanea Zimmerman

  Copyright/Attribution Notice:
  Attribute to Wolthera van H�vell tot Westerflier
`

sync.render("ui_boardStamps", function(obj, app, scope) {
  scope = scope || {
    viewOnly : app.attr("viewOnly"),
    local : app.attr("local") == "true",
    selected : app.attr("set") || 0,
    board : app.attr("board"),
    tile : app.attr("tile") == "true",
    custom : app.attr("custom") == "true",
  };
  if (game.config.data.offline) {
    scope.local = true;
  }
  if (!obj) {
    game.locals["stamps"] = game.locals["stamps"] || sync.obj();
    game.locals["stamps"].data = game.locals["stamps"].data || {
      _t : "st",
      sets : [],
      defaults : [
        {
          name : "Blue Sword Games",
          legal : {name : "Thanks to Blue Sword Games!", href : "https://www.patreon.com/blueswordgames"},
          sheets : {
            "Ground" : {i : "/content/bluesword/ground.png", p : 0, gW : 128, gH : 128, w : 1024, h : 1024,
              objs : [{"i":3,"gW":2,"gH":2,"w":256,"h":256},{"i":0,"gW":1,"gH":3,"w":128,"h":384},{"i":1,"gW":2,"gH":3,"w":256,"h":384},{"i":19,"gW":1,"gH":1,"w":128,"h":128},{"i":59,"gW":1,"gH":1,"w":128,"h":128},{"i":40,"gW":1,"gH":3,"w":128,"h":384},{"i":41,"gW":2,"gH":3,"w":256,"h":384},{"i":60,"gW":1,"gH":1,"w":128,"h":128},{"i":5,"gW":3,"gH":1,"w":384,"h":128},{"i":13,"gW":3,"gH":2,"w":384,"h":256}]
            },
            "Interior" : {i : "/content/bluesword/interior.png", p : 0, gW : 128, gH : 128, w : 1024, h : 2048,
              objs : [{"i":0,"gW":1,"gH":1,"w":128,"h":128},{"i":1,"gW":1,"gH":1,"w":128,"h":128},{"i":2,"gW":2,"gH":1,"w":256,"h":128},{"i":4,"gW":2,"gH":1,"w":256,"h":128},{"i":6,"gW":2,"gH":2,"w":256,"h":256},{"i":8,"gW":1,"gH":1,"w":128,"h":128},{"i":16,"gW":1,"gH":1,"w":128,"h":128},{"i":9,"gW":2,"gH":2,"w":256,"h":256},{"i":11,"gW":2,"gH":2,"w":256,"h":256},{"i":13,"gW":1,"gH":1,"w":128,"h":128},{"i":21,"gW":1,"gH":1,"w":128,"h":128},{"i":22,"gW":2,"gH":3,"w":256,"h":384},{"i":29,"gW":1,"gH":2,"w":128,"h":256},{"i":27,"gW":2,"gH":1,"w":256,"h":128},{"i":25,"gW":2,"gH":2,"w":256,"h":256},{"i":24,"gW":1,"gH":1,"w":128,"h":128},{"i":32,"gW":1,"gH":1,"w":128,"h":128},{"i":35,"gW":2,"gH":1,"w":256,"h":128},{"i":40,"gW":2,"gH":2,"w":256,"h":256},{"i":42,"gW":3,"gH":2,"w":384,"h":256},{"i":45,"gW":3,"gH":3,"w":384,"h":384},{"i":56,"gW":1,"gH":1,"w":128,"h":128},{"i":57,"gW":1,"gH":1,"w":128,"h":128},{"i":58,"gW":1,"gH":1,"w":128,"h":128},{"i":59,"gW":1,"gH":1,"w":128,"h":128},{"i":60,"gW":1,"gH":1,"w":128,"h":128},{"i":64,"gW":4,"gH":2,"w":512,"h":256},{"i":68,"gW":3,"gH":2,"w":384,"h":256},{"i":71,"gW":1,"gH":1,"w":128,"h":128},{"i":79,"gW":1,"gH":1,"w":128,"h":128},{"i":80,"gW":3,"gH":2,"w":384,"h":256},{"i":83,"gW":4,"gH":2,"w":512,"h":256},{"i":87,"gW":1,"gH":1,"w":128,"h":128},{"i":95,"gW":1,"gH":1,"w":128,"h":128},{"i":96,"gW":2,"gH":1,"w":256,"h":128},{"i":98,"gW":4,"gH":1,"w":512,"h":128},{"i":102,"gW":2,"gH":1,"w":256,"h":128},{"i":104,"gW":2,"gH":1,"w":256,"h":128},{"i":106,"gW":4,"gH":1,"w":512,"h":128},{"i":112,"gW":1,"gH":1,"w":128,"h":128},{"i":116,"gW":1,"gH":1,"w":128,"h":128},{"i":117,"gW":1,"gH":1,"w":128,"h":128},{"i":118,"gW":1,"gH":1,"w":128,"h":128},{"i":119,"gW":1,"gH":1,"w":128,"h":128},{"i":110,"gW":2,"gH":1,"w":256,"h":128},{"i":113,"gW":2,"gH":1,"w":256,"h":128},{"i":115,"gW":1,"gH":1,"w":128,"h":128}]
            },
            "Items" : {i : "/content/bluesword/items.png", p : 0, gW : 128, gH : 128, w : 1024, h : 1024,
              objs : [{"i":0,"gW":1,"gH":1,"w":64,"h":64},{"i":1,"gW":1,"gH":1,"w":64,"h":64},{"i":8,"gW":1,"gH":1,"w":64,"h":64},{"i":9,"gW":1,"gH":1,"w":64,"h":64},{"i":2,"gW":1,"gH":2,"w":64,"h":128},{"i":3,"gW":1,"gH":2,"w":64,"h":128},{"i":4,"gW":1,"gH":2,"w":64,"h":128},{"i":5,"gW":1,"gH":1,"w":64,"h":64},{"i":13,"gW":1,"gH":1,"w":64,"h":64},{"i":6,"gW":2,"gH":1,"w":128,"h":64},{"i":14,"gW":2,"gH":1,"w":128,"h":64},{"i":16,"gW":1,"gH":1,"w":64,"h":64},{"i":17,"gW":1,"gH":1,"w":64,"h":64},{"i":18,"gW":1,"gH":1,"w":64,"h":64},{"i":19,"gW":1,"gH":1,"w":64,"h":64},{"i":20,"gW":1,"gH":1,"w":64,"h":64},{"i":21,"gW":1,"gH":1,"w":64,"h":64},{"i":22,"gW":1,"gH":1,"w":64,"h":64},{"i":23,"gW":1,"gH":1,"w":64,"h":64},{"i":24,"gW":1,"gH":1,"w":64,"h":64},{"i":25,"gW":1,"gH":1,"w":64,"h":64},{"i":26,"gW":1,"gH":1,"w":64,"h":64},{"i":27,"gW":1,"gH":1,"w":64,"h":64},{"i":28,"gW":1,"gH":1,"w":64,"h":64},{"i":29,"gW":1,"gH":1,"w":64,"h":64},{"i":30,"gW":1,"gH":1,"w":64,"h":64},{"i":31,"gW":1,"gH":1,"w":64,"h":64},{"i":32,"gW":1,"gH":1,"w":64,"h":64},{"i":33,"gW":1,"gH":1,"w":64,"h":64},{"i":35,"gW":1,"gH":1,"w":64,"h":64},{"i":36,"gW":1,"gH":1,"w":64,"h":64},{"i":37,"gW":1,"gH":1,"w":64,"h":64},{"i":38,"gW":1,"gH":1,"w":64,"h":64},{"i":39,"gW":1,"gH":1,"w":64,"h":64},{"i":40,"gW":1,"gH":1,"w":64,"h":64},{"i":41,"gW":1,"gH":1,"w":64,"h":64},{"i":42,"gW":1,"gH":1,"w":64,"h":64},{"i":43,"gW":1,"gH":1,"w":64,"h":64},{"i":44,"gW":1,"gH":1,"w":64,"h":64},{"i":45,"gW":1,"gH":1,"w":64,"h":64},{"i":46,"gW":1,"gH":1,"w":64,"h":64},{"i":47,"gW":1,"gH":1,"w":64,"h":64},{"i":48,"gW":1,"gH":1,"w":64,"h":64},{"i":49,"gW":1,"gH":1,"w":64,"h":64},{"i":50,"gW":1,"gH":1,"w":64,"h":64},{"i":51,"gW":1,"gH":1,"w":64,"h":64},{"i":52,"gW":1,"gH":1,"w":64,"h":64},{"i":53,"gW":1,"gH":1,"w":64,"h":64},{"i":54,"gW":1,"gH":1,"w":64,"h":64},{"i":56,"gW":1,"gH":1,"w":64,"h":64},{"i":57,"gW":1,"gH":1,"w":64,"h":64},{"i":58,"gW":1,"gH":1,"w":64,"h":64},{"i":59,"gW":1,"gH":1,"w":64,"h":64},{"i":60,"gW":1,"gH":1,"w":64,"h":64},{"i":61,"gW":1,"gH":1,"w":64,"h":64}]
            },
            "Forest" : {i : "/content/bluesword/forest.png", p : 0, gW : 128, gH : 128, w : 1024, h : 1024,
              objs : [{"i":0,"gW":3,"gH":3,"w":192,"h":192},{"i":3,"gW":2,"gH":2,"w":128,"h":128},{"i":5,"gW":2,"gH":2,"w":128,"h":128},{"i":7,"gW":1,"gH":1,"w":64,"h":64},{"i":24,"gW":3,"gH":3,"w":192,"h":192},{"i":21,"gW":1,"gH":2,"w":64,"h":128},{"i":37,"gW":1,"gH":1,"w":64,"h":64},{"i":22,"gW":1,"gH":2,"w":64,"h":128},{"i":38,"gW":1,"gH":1,"w":64,"h":64},{"i":15,"gW":1,"gH":1,"w":64,"h":64},{"i":23,"gW":1,"gH":1,"w":64,"h":64},{"i":31,"gW":1,"gH":1,"w":64,"h":64},{"i":24,"gW":3,"gH":2,"w":192,"h":128},{"i":19,"gW":2,"gH":2,"w":128,"h":128}]
            },
            "Desert" : {i : "/content/bluesword/desert.png", p : 0, gW : 128, gH : 128, w : 1152, h : 2048,
              objs : [{"i":0,"gW":2,"gH":2,"w":128,"h":128},{"i":2,"gW":1,"gH":1,"w":64,"h":64},{"i":11,"gW":1,"gH":1,"w":64,"h":64},{"i":3,"gW":1,"gH":1,"w":64,"h":64},{"i":12,"gW":1,"gH":1,"w":64,"h":64},{"i":4,"gW":2,"gH":2,"w":128,"h":128},{"i":6,"gW":2,"gH":2,"w":128,"h":128},{"i":8,"gW":1,"gH":1,"w":64,"h":64},{"i":17,"gW":1,"gH":1,"w":64,"h":64},{"i":25,"gW":2,"gH":2,"w":128,"h":128},{"i":24,"gW":1,"gH":1,"w":64,"h":64},{"i":33,"gW":1,"gH":1,"w":64,"h":64},{"i":23,"gW":1,"gH":2,"w":64,"h":128},{"i":21,"gW":2,"gH":2,"w":128,"h":128},{"i":20,"gW":1,"gH":1,"w":64,"h":64},{"i":19,"gW":1,"gH":1,"w":64,"h":64},{"i":18,"gW":1,"gH":1,"w":64,"h":64},{"i":29,"gW":1,"gH":1,"w":64,"h":64},{"i":27,"gW":2,"gH":1,"w":128,"h":64},{"i":36,"gW":3,"gH":2,"w":192,"h":128},{"i":39,"gW":3,"gH":3,"w":192,"h":192},{"i":42,"gW":3,"gH":3,"w":192,"h":192},{"i":54,"gW":2,"gH":2,"w":128,"h":128},{"i":56,"gW":1,"gH":1,"w":64,"h":64},{"i":65,"gW":1,"gH":1,"w":64,"h":64},{"i":66,"gW":1,"gH":1,"w":64,"h":64},{"i":67,"gW":1,"gH":1,"w":64,"h":64},{"i":68,"gW":1,"gH":1,"w":64,"h":64},{"i":77,"gW":1,"gH":1,"w":64,"h":64},{"i":76,"gW":1,"gH":1,"w":64,"h":64},{"i":75,"gW":1,"gH":1,"w":64,"h":64},{"i":74,"gW":1,"gH":1,"w":64,"h":64},{"i":72,"gW":2,"gH":2,"w":128,"h":128},{"i":90,"gW":2,"gH":2,"w":128,"h":128},{"i":108,"gW":2,"gH":2,"w":128,"h":128},{"i":83,"gW":2,"gH":2,"w":128,"h":128},{"i":85,"gW":2,"gH":2,"w":128,"h":128},{"i":87,"gW":1,"gH":1,"w":64,"h":64},{"i":96,"gW":1,"gH":1,"w":64,"h":64},{"i":69,"gW":1,"gH":2,"w":64,"h":128},{"i":70,"gW":2,"gH":2,"w":128,"h":128},{"i":88,"gW":1,"gH":2,"w":64,"h":128},{"i":89,"gW":1,"gH":1,"w":64,"h":64},{"i":98,"gW":1,"gH":1,"w":64,"h":64},{"i":101,"gW":2,"gH":2,"w":128,"h":128},{"i":119,"gW":1,"gH":1,"w":64,"h":64},{"i":103,"gW":4,"gH":4,"w":256,"h":256}]
            },
          }
        },
        {
          name : "Default Tiles",
          legal : {name : "Thanks to Open Game Art!", license : _ogart},
          sheets : {
            "Terrain" : {i : "/content/sheets/terrain_ful.png", p : 0, gW : 32, gH : 32, w : 1152, h : 1024},
            "Structures" : {i : "/content/sheets/structure_ful.png", p : 0, gW : 32, gH : 32, w : 1152, h : 2304},
            "Interiors" : {i : "/content/sheets/interiors_ful.png", p : 0, gW : 32, gH : 32, w : 1152, h : 1152},
            "Objects" : {i : "/content/sheets/objects_ful.png", p : 0, gW : 32, gH : 32, w : 1152, h : 1152},
          }
        },
        {
          name : "Hex Tiles",
          legal : {name : "Thanks to Kenney!", href : "https://www.patreon.com/kenney"},
          sheets : {
            "Terrain" : {i : "/content/sheets/hex_terrain.png", p : 0, gW : 140, gH : 120, w : 700, h : 1440},
            "Structures" : {i : "/content/sheets/hex_structures.png", p : 0, gW : 140, gH : 120, w : 840, h : 1440},
            "Decoration" : {i : "/content/sheets/hex_decoration.png", p : 0, gW : 140, gH : 120, w : 840, h : 1560},
          }
        },
      ]
    };
    $.ajax({
      url: '/retrieveUser?id='+getCookie("UserID"),
      error: function(code) {
        console.log(code);
      },
      dataType: 'json',
      success: function(data) {
        if (data.collections) {
          game.locals["stamps"].data.sets = data.collections;
          game.locals["stamps"].data.sets[0] = {
            name : "Blue Sword Games",
            legal : {name : "Thanks to Blue Sword Games!", href : "https://www.patreon.com/blueswordgames"},
            sheets : {
              "Ground" : {i : "/content/bluesword/ground.png", p : 0, gW : 128, gH : 128, w : 1024, h : 1024,
                objs : [{"i":3,"gW":2,"gH":2,"w":256,"h":256},{"i":0,"gW":1,"gH":3,"w":128,"h":384},{"i":1,"gW":2,"gH":3,"w":256,"h":384},{"i":19,"gW":1,"gH":1,"w":128,"h":128},{"i":59,"gW":1,"gH":1,"w":128,"h":128},{"i":40,"gW":1,"gH":3,"w":128,"h":384},{"i":41,"gW":2,"gH":3,"w":256,"h":384},{"i":60,"gW":1,"gH":1,"w":128,"h":128},{"i":5,"gW":3,"gH":1,"w":384,"h":128},{"i":13,"gW":3,"gH":2,"w":384,"h":256}]
              },
              "Interior" : {i : "/content/bluesword/interior.png", p : 0, gW : 128, gH : 128, w : 1024, h : 2048,
                objs : [{"i":0,"gW":1,"gH":1,"w":128,"h":128},{"i":1,"gW":1,"gH":1,"w":128,"h":128},{"i":2,"gW":2,"gH":1,"w":256,"h":128},{"i":4,"gW":2,"gH":1,"w":256,"h":128},{"i":6,"gW":2,"gH":2,"w":256,"h":256},{"i":8,"gW":1,"gH":1,"w":128,"h":128},{"i":16,"gW":1,"gH":1,"w":128,"h":128},{"i":9,"gW":2,"gH":2,"w":256,"h":256},{"i":11,"gW":2,"gH":2,"w":256,"h":256},{"i":13,"gW":1,"gH":1,"w":128,"h":128},{"i":21,"gW":1,"gH":1,"w":128,"h":128},{"i":22,"gW":2,"gH":3,"w":256,"h":384},{"i":29,"gW":1,"gH":2,"w":128,"h":256},{"i":27,"gW":2,"gH":1,"w":256,"h":128},{"i":25,"gW":2,"gH":2,"w":256,"h":256},{"i":24,"gW":1,"gH":1,"w":128,"h":128},{"i":32,"gW":1,"gH":1,"w":128,"h":128},{"i":35,"gW":2,"gH":1,"w":256,"h":128},{"i":40,"gW":2,"gH":2,"w":256,"h":256},{"i":42,"gW":3,"gH":2,"w":384,"h":256},{"i":45,"gW":3,"gH":3,"w":384,"h":384},{"i":56,"gW":1,"gH":1,"w":128,"h":128},{"i":57,"gW":1,"gH":1,"w":128,"h":128},{"i":58,"gW":1,"gH":1,"w":128,"h":128},{"i":59,"gW":1,"gH":1,"w":128,"h":128},{"i":60,"gW":1,"gH":1,"w":128,"h":128},{"i":64,"gW":4,"gH":2,"w":512,"h":256},{"i":68,"gW":3,"gH":2,"w":384,"h":256},{"i":71,"gW":1,"gH":1,"w":128,"h":128},{"i":79,"gW":1,"gH":1,"w":128,"h":128},{"i":80,"gW":3,"gH":2,"w":384,"h":256},{"i":83,"gW":4,"gH":2,"w":512,"h":256},{"i":87,"gW":1,"gH":1,"w":128,"h":128},{"i":95,"gW":1,"gH":1,"w":128,"h":128},{"i":96,"gW":2,"gH":1,"w":256,"h":128},{"i":98,"gW":4,"gH":1,"w":512,"h":128},{"i":102,"gW":2,"gH":1,"w":256,"h":128},{"i":104,"gW":2,"gH":1,"w":256,"h":128},{"i":106,"gW":4,"gH":1,"w":512,"h":128},{"i":112,"gW":1,"gH":1,"w":128,"h":128},{"i":116,"gW":1,"gH":1,"w":128,"h":128},{"i":117,"gW":1,"gH":1,"w":128,"h":128},{"i":118,"gW":1,"gH":1,"w":128,"h":128},{"i":119,"gW":1,"gH":1,"w":128,"h":128},{"i":110,"gW":2,"gH":1,"w":256,"h":128},{"i":113,"gW":2,"gH":1,"w":256,"h":128},{"i":115,"gW":1,"gH":1,"w":128,"h":128}]
              },
              "Items" : {i : "/content/bluesword/items.png", p : 0, gW : 128, gH : 128, w : 1024, h : 1024,
                objs : [{"i":0,"gW":1,"gH":1,"w":64,"h":64},{"i":1,"gW":1,"gH":1,"w":64,"h":64},{"i":8,"gW":1,"gH":1,"w":64,"h":64},{"i":9,"gW":1,"gH":1,"w":64,"h":64},{"i":2,"gW":1,"gH":2,"w":64,"h":128},{"i":3,"gW":1,"gH":2,"w":64,"h":128},{"i":4,"gW":1,"gH":2,"w":64,"h":128},{"i":5,"gW":1,"gH":1,"w":64,"h":64},{"i":13,"gW":1,"gH":1,"w":64,"h":64},{"i":6,"gW":2,"gH":1,"w":128,"h":64},{"i":14,"gW":2,"gH":1,"w":128,"h":64},{"i":16,"gW":1,"gH":1,"w":64,"h":64},{"i":17,"gW":1,"gH":1,"w":64,"h":64},{"i":18,"gW":1,"gH":1,"w":64,"h":64},{"i":19,"gW":1,"gH":1,"w":64,"h":64},{"i":20,"gW":1,"gH":1,"w":64,"h":64},{"i":21,"gW":1,"gH":1,"w":64,"h":64},{"i":22,"gW":1,"gH":1,"w":64,"h":64},{"i":23,"gW":1,"gH":1,"w":64,"h":64},{"i":24,"gW":1,"gH":1,"w":64,"h":64},{"i":25,"gW":1,"gH":1,"w":64,"h":64},{"i":26,"gW":1,"gH":1,"w":64,"h":64},{"i":27,"gW":1,"gH":1,"w":64,"h":64},{"i":28,"gW":1,"gH":1,"w":64,"h":64},{"i":29,"gW":1,"gH":1,"w":64,"h":64},{"i":30,"gW":1,"gH":1,"w":64,"h":64},{"i":31,"gW":1,"gH":1,"w":64,"h":64},{"i":32,"gW":1,"gH":1,"w":64,"h":64},{"i":33,"gW":1,"gH":1,"w":64,"h":64},{"i":35,"gW":1,"gH":1,"w":64,"h":64},{"i":36,"gW":1,"gH":1,"w":64,"h":64},{"i":37,"gW":1,"gH":1,"w":64,"h":64},{"i":38,"gW":1,"gH":1,"w":64,"h":64},{"i":39,"gW":1,"gH":1,"w":64,"h":64},{"i":40,"gW":1,"gH":1,"w":64,"h":64},{"i":41,"gW":1,"gH":1,"w":64,"h":64},{"i":42,"gW":1,"gH":1,"w":64,"h":64},{"i":43,"gW":1,"gH":1,"w":64,"h":64},{"i":44,"gW":1,"gH":1,"w":64,"h":64},{"i":45,"gW":1,"gH":1,"w":64,"h":64},{"i":46,"gW":1,"gH":1,"w":64,"h":64},{"i":47,"gW":1,"gH":1,"w":64,"h":64},{"i":48,"gW":1,"gH":1,"w":64,"h":64},{"i":49,"gW":1,"gH":1,"w":64,"h":64},{"i":50,"gW":1,"gH":1,"w":64,"h":64},{"i":51,"gW":1,"gH":1,"w":64,"h":64},{"i":52,"gW":1,"gH":1,"w":64,"h":64},{"i":53,"gW":1,"gH":1,"w":64,"h":64},{"i":54,"gW":1,"gH":1,"w":64,"h":64},{"i":56,"gW":1,"gH":1,"w":64,"h":64},{"i":57,"gW":1,"gH":1,"w":64,"h":64},{"i":58,"gW":1,"gH":1,"w":64,"h":64},{"i":59,"gW":1,"gH":1,"w":64,"h":64},{"i":60,"gW":1,"gH":1,"w":64,"h":64},{"i":61,"gW":1,"gH":1,"w":64,"h":64}]
              },
              "Forest" : {i : "/content/bluesword/forest.png", p : 0, gW : 128, gH : 128, w : 1024, h : 1024,
                objs : [{"i":0,"gW":3,"gH":3,"w":192,"h":192},{"i":3,"gW":2,"gH":2,"w":128,"h":128},{"i":5,"gW":2,"gH":2,"w":128,"h":128},{"i":7,"gW":1,"gH":1,"w":64,"h":64},{"i":24,"gW":3,"gH":3,"w":192,"h":192},{"i":21,"gW":1,"gH":2,"w":64,"h":128},{"i":37,"gW":1,"gH":1,"w":64,"h":64},{"i":22,"gW":1,"gH":2,"w":64,"h":128},{"i":38,"gW":1,"gH":1,"w":64,"h":64},{"i":15,"gW":1,"gH":1,"w":64,"h":64},{"i":23,"gW":1,"gH":1,"w":64,"h":64},{"i":31,"gW":1,"gH":1,"w":64,"h":64},{"i":24,"gW":3,"gH":2,"w":192,"h":128},{"i":19,"gW":2,"gH":2,"w":128,"h":128}]
              },
              "Desert" : {i : "/content/bluesword/desert.png", p : 0, gW : 128, gH : 128, w : 1152, h : 2048,
                objs : [{"i":0,"gW":2,"gH":2,"w":128,"h":128},{"i":2,"gW":1,"gH":1,"w":64,"h":64},{"i":11,"gW":1,"gH":1,"w":64,"h":64},{"i":3,"gW":1,"gH":1,"w":64,"h":64},{"i":12,"gW":1,"gH":1,"w":64,"h":64},{"i":4,"gW":2,"gH":2,"w":128,"h":128},{"i":6,"gW":2,"gH":2,"w":128,"h":128},{"i":8,"gW":1,"gH":1,"w":64,"h":64},{"i":17,"gW":1,"gH":1,"w":64,"h":64},{"i":25,"gW":2,"gH":2,"w":128,"h":128},{"i":24,"gW":1,"gH":1,"w":64,"h":64},{"i":33,"gW":1,"gH":1,"w":64,"h":64},{"i":23,"gW":1,"gH":2,"w":64,"h":128},{"i":21,"gW":2,"gH":2,"w":128,"h":128},{"i":20,"gW":1,"gH":1,"w":64,"h":64},{"i":19,"gW":1,"gH":1,"w":64,"h":64},{"i":18,"gW":1,"gH":1,"w":64,"h":64},{"i":29,"gW":1,"gH":1,"w":64,"h":64},{"i":27,"gW":2,"gH":1,"w":128,"h":64},{"i":36,"gW":3,"gH":2,"w":192,"h":128},{"i":39,"gW":3,"gH":3,"w":192,"h":192},{"i":42,"gW":3,"gH":3,"w":192,"h":192},{"i":54,"gW":2,"gH":2,"w":128,"h":128},{"i":56,"gW":1,"gH":1,"w":64,"h":64},{"i":65,"gW":1,"gH":1,"w":64,"h":64},{"i":66,"gW":1,"gH":1,"w":64,"h":64},{"i":67,"gW":1,"gH":1,"w":64,"h":64},{"i":68,"gW":1,"gH":1,"w":64,"h":64},{"i":77,"gW":1,"gH":1,"w":64,"h":64},{"i":76,"gW":1,"gH":1,"w":64,"h":64},{"i":75,"gW":1,"gH":1,"w":64,"h":64},{"i":74,"gW":1,"gH":1,"w":64,"h":64},{"i":72,"gW":2,"gH":2,"w":128,"h":128},{"i":90,"gW":2,"gH":2,"w":128,"h":128},{"i":108,"gW":2,"gH":2,"w":128,"h":128},{"i":83,"gW":2,"gH":2,"w":128,"h":128},{"i":85,"gW":2,"gH":2,"w":128,"h":128},{"i":87,"gW":1,"gH":1,"w":64,"h":64},{"i":96,"gW":1,"gH":1,"w":64,"h":64},{"i":69,"gW":1,"gH":2,"w":64,"h":128},{"i":70,"gW":2,"gH":2,"w":128,"h":128},{"i":88,"gW":1,"gH":2,"w":64,"h":128},{"i":89,"gW":1,"gH":1,"w":64,"h":64},{"i":98,"gW":1,"gH":1,"w":64,"h":64},{"i":101,"gW":2,"gH":2,"w":128,"h":128},{"i":119,"gW":1,"gH":1,"w":64,"h":64},{"i":103,"gW":4,"gH":4,"w":256,"h":256}]
              },
            }
          };
          game.locals["stamps"].update();
        }
      },
      type: 'GET'
    });
    game.locals["stamps"].update();
    app.attr("board", scope.board);
    app.attr("tile", scope.tile);
    game.locals["stamps"].addApp(app);
    return $("<div>");
  }
  var data = obj.data;

  var stampDiv = $("<div>");
  stampDiv.addClass("flexcolumn flex");
  stampDiv.css("border-width", "2px");

  var board = game.entities.data[app.attr("board")];

  var stampWrap = $("<div>").appendTo(stampDiv);
  stampWrap.addClass("flexrow flex");

  var content = $("<div>").appendTo(stampWrap);
  content.addClass("flexcolumn fit-y");

  var contentHeader = $("<div>").appendTo(content);
  contentHeader.addClass("background alttext lpadding flexmiddle");
  contentHeader.css("font-size", "1.2em");

  contentHeader.append("<text>Collections</text>");

  var setList = $("<div>").appendTo(content);
  setList.addClass("flexcolumn flex");

  for (var i in data.defaults) {
    var set = $("<div>").appendTo(setList);
    set.addClass("smooth outline hover2 flexrow spadding");

    if (i == scope.selected && !scope.custom) {
      set.addClass("highlight alttext");
    }
    if (i > 0) {
      set.append("<b class='flex flexmiddle'>"+data.defaults[i].name+"</b>");
    }
    else {
      set.append("<b class='flex middle'>"+data.defaults[i].name+"</b>");
    }

    set.attr("index", i);
    set.click(function(){
      app.attr("set", $(this).attr("index"));
      app.removeAttr("custom");
      obj.update();
      layout.coverlay("select-stamps");
    });
  }

  for (var i in data.sets) {
    var set = $("<div>").appendTo(setList);
    set.addClass("smooth outline hover2 flexrow spadding");
    if (i == scope.selected && scope.custom) {
      set.addClass("highlight alttext");
    }
    if (i > 0) {
      set.append("<b class='flex flexmiddle'>"+data.sets[i].name+"</b>");
    }
    else {
      set.append("<b class='flex flexmiddle'>"+data.sets[i].name+"</b>");
    }

    set.attr("index", i);
    set.click(function(){
      app.attr("set", $(this).attr("index"));
      app.attr("custom", "true");
      obj.update();
      layout.coverlay("select-stamps");
    });
    if (i != 0) {
      var del = genIcon("remove").appendTo(set);
      del.addClass("background lrpadding outline alttext");
      del.attr("index", i);
      del.attr("title", "Delete Collection");
      del.addClass("destroy");
      del.click(function(){
        data.sets.splice($(this).attr("index"));
        obj.sync("storeCollection");
      });
    }
  }
  var doScale;
  if (!scope.viewOnly) {
    setList.addClass("outlinebottom");

    var subOptions = $("<div>").appendTo(content);
    subOptions.addClass("flexcolumn flexmiddle foreground alttext padding subtitle");

    var checkWrap = $("<div>").appendTo(subOptions);
    checkWrap.addClass("flexmiddle");

    var doScale = genInput({
      type : "checkbox",
      parent : checkWrap,
    });
    doScale.prop("checked", true);
    doScale.css("margin-top", "0");

    checkWrap.append("Scale to Grid Size");

    var newCollection = genIcon("plus", "New Collection")//.appendTo(subOptions);
    newCollection.click(function(){
      ui_prompt({
        target : $(this),
        inputs : {
          "Collection Name" : ""
        },
        click : function(ev, inputs){
          data.sets.push({name : inputs["Collection Name"].val(), stamps : [], sheets : {}});
          obj.update();
        }
      })
    });

    if (scope.custom) {
      var addStamp = genIcon("plus", "Add Sheet").appendTo(subOptions);
      addStamp.click(function(){
        ui_prompt({
          target : $(this),
          inputs : {
            "Name" : "",
            "URL" : "",
            "Padding" : {type : "number", value : 0},
            "Grid Width" : {type : "number", value : 32},
            "Grid Height" : {type : "number", value : 32},
          },
          click : function(ev, inputs) {
            if (inputs["URL"].val() && inputs["Name"].val()) {
              data.sets[scope.selected].sheets[inputs["Name"].val()] = {};
              var imgData = data.sets[scope.selected].sheets[inputs["Name"].val()];
              imgData.p = inputs["Padding"].val();
              imgData.gW = inputs["Grid Width"].val();
              imgData.gH = inputs["Grid Height"].val();
              if (imgData.i == inputs["URL"].val()) {
                obj.sync("storeCollection");
              }
              else {
                imgData.i = inputs["URL"].val();
                var img = $("<img>").appendTo(addStamp);
                img.attr("src", imgData.i);
                img.bind("load", function(){
                  imgData.w = $(this).width();
                  imgData.h = $(this).height();
                  imgData.p = inputs["Padding"].val();
                  imgData.gW = inputs["Grid Width"].val();
                  imgData.gH = inputs["Grid Height"].val();
                  obj.sync("storeCollection");
                });
              }
            }
          }
        });
      });
    }
  }

  var listWrapper = $("<div>").appendTo(stampWrap);
  listWrapper.addClass("flexcolumn flex");
  var target = data.defaults;
  if (scope.custom) {
    target = data.sets;
  }
  if (target[scope.selected].legal) {
    var license = $("<div class='background alttext flexmiddle fit-x lrpadding'><a "+((target[scope.selected].legal.href != null)?("href='"+target[scope.selected].legal.href+"' target='_blank'"):(""))+">"+(target[scope.selected].legal.name || "License")+"</a></div>").appendTo(listWrapper);
    license.attr("title", "License");
    if (target[scope.selected].legal.license) {
      license.click(function(){
        var content = $("<div>");
        if (target[scope.selected].legal.html) {
          content.css("width", "30vw");
          content.css("height", "40vh");
          setTimeout(function(){
            var newFrame = $("<iframe>").appendTo(content);
            newFrame.attr("width", content.width());
            newFrame.attr("height", content.height());
            newFrame.attr("sandbox", "");
            newFrame.css("border", "none");
            newFrame.css("outline", "none");

            var str = target[scope.selected].legal.license;
            str = replaceAll(str, "href=", "nolinks=");
            str = replaceAll(str, "iframe", "div");

            newFrame.contents().find('html').html(str);
          }, 10);
        }
        else {
          content = $("<textarea>");
          content.css("border", "none");
          content.css("disabled", "true");
          content.css("width", "30vw");
          content.css("height", "40vh");
          content.text(target[scope.selected].legal.license);
        }
        var pop = ui_popOut({
          target : $(this),
          id : "license",
        }, content);
      });
    }
  }

  var stampList = $("<div>").appendTo(listWrapper);
  stampList.addClass("flexrow flexaround flexwrap flex lpadding");

  if (!layout.mobile) {
    stampList.on("dragover", function(ev) {
      ev.preventDefault();
      ev.stopPropagation();
      if (!$("#"+app.attr("id")+"-drag-overlay").length) {
        var olay = layout.overlay({
          target : app,
          id : app.attr("id")+"-drag-overlay",
          style : {"background-color" : "rgba(0,0,0,0.5)", "pointer-events" : "none"}
        });
        olay.addClass("flexcolumn flexmiddle alttext");
        olay.css("font-size", "2em");
        olay.append("<b>Drop to Create</b>");
      }
    });

    stampList.on('drop', function(ev){
      ev.preventDefault();
      ev.stopPropagation();
      var dt = ev.originalEvent.dataTransfer;
      if (dt.getData("Text")) {
        var imgVal = dt.getData("Text");
        var img = $("<img>").appendTo(app);
        img.attr("src", dt.getData("Text"));
        if (imgVal) {
          img.bind("load", function(){
            ui_prompt({
              target : stampList,
              inputs : {"Name" : ""},
              click : function(ev, inputs){
                if (inputs["Name"].val() && inputs["Name"].val().trim()) {
                  obj.target[scope.selected].sheets[inputs["Name"].val().trim()] = {
                    p : 0,
                    gW : 32,
                    gH : 32,
                    i : imgVal,
                    w : img[0].naturalWidth,
                    h : img[0].naturalHeight,
                    nW : img[0].naturalWidth,
                    nH : img[0].naturalHeight
                  };
                  obj.update();
                }
              }
            });
            img.hide();
            layout.coverlay(app.attr("id")+"-drag-overlay");
          });
        }
      }
    });
    stampList.on("dragleave", function(ev) {
      ev.preventDefault();
      ev.stopPropagation();
      layout.coverlay(app.attr("id")+"-drag-overlay");
    });
    stampList.mouseout(function(){
      layout.coverlay(app.attr("id")+"-drag-overlay");
    });
  }

  for (var i in target[scope.selected].sheets) {
    var urls = target[scope.selected].sheets;
    var imgWrap = $("<div>").appendTo(stampList);
    imgWrap.addClass("outline smooth flexcolumn lmargin flex hover2");
    imgWrap.attr("key", i);
    imgWrap.css("min-width", "70px");
    imgWrap.css("min-height", "70px");
    imgWrap.css("padding", "2px");
    imgWrap.css("overflow", "hidden");
    imgWrap.append("<div class='outlinebottom flexmiddle'><b>"+i+"</b></div>");
    imgWrap.click(function(){
      var newSheet = duplicate(urls[$(this).attr("key")]);
      if (doScale.prop("checked") && board.data.gridW && board.data.gridH) {
        var scaleX = board.data.gridW/newSheet.gW;
        var scaleY = board.data.gridH/newSheet.gH;

        newSheet.nW = (newSheet.nW || newSheet.w);
        newSheet.nH = (newSheet.nH || newSheet.h);
        newSheet.w = (newSheet.w) * scaleX;
        newSheet.h = (newSheet.h) * scaleY;
        newSheet.gW = newSheet.gW * scaleX;
        newSheet.gH =  newSheet.gH * scaleY;
        if (newSheet.objs) {
          for (var i=0; i<newSheet.objs.length; i++) {
            var tileData = newSheet.objs[i];
            tileData.w = (tileData.w) * scaleX;
            tileData.h = (tileData.h) * scaleY;
          }
        }
      }
      board.data.sheets.push(newSheet);
      board.sync("updateAsset");
    });
    var sheet = $("<div>").appendTo(imgWrap);
    sheet.addClass("flex");
    sheet.css("background-image", "url('"+ urls[i].i +"')");
    sheet.css("background-repeat", "no-repeat");
    sheet.css("background-position", "center");
    sheet.css("background-size", "contain");

    if (scope.custom) {
      sheet.addClass("outlinebottom");

      var optionsBar = $("<div>").appendTo(imgWrap);
      optionsBar.addClass("flexaround smooth");

      var edit = genIcon("pencil").appendTo(optionsBar);
      edit.addClass("lrpadding");
      edit.attr("index", i);
      edit.click(function(ev){
        var imgData = urls[$(this).attr("index")];
        ui_prompt({
          target : $(this),
          inputs : {
            "URL" : imgData.i,
            "Padding" : {type : "number", value : imgData.p},
            "Grid Width" : {type : "number", value : imgData.gW},
            "Grid Height" : {type : "number", value : imgData.gH},
          },
          click : function(ev, inputs) {
            imgData.p = inputs["Padding"].val();
            imgData.gW = inputs["Grid Width"].val();
            imgData.gH = inputs["Grid Height"].val();
            if (imgData.i == inputs["URL"].val()) {
              obj.sync("storeCollection");
            }
            else {
              imgData.i = inputs["URL"].val();
              var img = $("<img>").appendTo(edit);
              img.attr("src", imgData.i);
              img.bind("load", function(){
                imgData.w = $(this).width();
                imgData.h = $(this).height();
                imgData.p = inputs["Padding"].val();
                imgData.gW = inputs["Grid Width"].val();
                imgData.gH = inputs["Grid Height"].val();
                obj.sync("storeCollection");
              });
            }
          }
        });
        ev.preventDefault();
        ev.stopPropagation();
      });

      var del = genIcon("trash").appendTo(optionsBar);
      del.addClass("lrpadding");
      del.attr("index", i);
      del.addClass("destroy");
      del.click(function(ev){
        delete urls[$(this).attr("index")];
        obj.sync("storeCollection");
        ev.preventDefault();
        ev.stopPropagation();
      });
    }
  }

  stampDiv.append("<div class='flexmiddle subtitle'><i>By using these tiles you accept to their license and terms (if applicable)</i></div>");

  return stampDiv;
});
